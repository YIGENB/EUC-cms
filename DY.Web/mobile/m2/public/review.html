			<!-- 发表留言后的提示框  开始-->
			<div style="display:none;" id="msgSuccessAlertInfo" class="z3g-alertInfoFault-c1">	
				<div class="z3g-alertWindow">		
					<section class="z3g-alertInfoSuccess-c1">
						<div class="alertInfoWrap">
							<div class="alertInfoCont">
								<div class="icon"></div>
								<div class="info">
									<p class="infoTitle">您的留言发送成功!</p>
									<p class="infoOther">感谢您的留言，我们将会第一时间回复并与您联系，谢谢!</p>
								</div>
							</div>
							<div class="alertInfoOperation">
								<button type="button" class="active z3g-button">关闭</button>
							</div>
						</div>
					</section>
				</div>
			</div> 			
			<!-- z3g-alertInfoFault-c1 -->
			<section style="display:none;" class="z3g-alertInfoFault-c1" id="msgFaultAlertInfo">
				<div class="alertInfoWrap">
					<div class="alertInfoCont">
						<div class="icon"></div>
						<div class="info">
							<p class="infoTitle">您的留言发送失败!</p>
							<p class="infoOther">感谢您的留言，我们将会第一时间回复并与您联系，谢谢!</p>
						</div>
					</div>
					<div class="alertInfoOperation">
						<button type="button" class="active z3g-button">关闭</button>
					</div>
				</div>
			</section>
#if ($type != "list")
<span class="W100P MT10px" id="review-list">正在载入评论数据...</span>
#end
#if ($type == "list")
<div style="" id="borderContList" class="borderCont">
							<ul>
							#foreach($row in $reviewlist)
								<li>
									<div msgcount="0" alt="" class="active replayBtn">
										<h3 class="productTitle">$SiteUtils.StrFormat($row.content)</h3>
										<p class="cont">
											<span class="left">
												<em class="time">$row.add_time</em>
												<em class="people">$row.user_name</em>
											</span>
											<span class="right">回复</span>
											    #if ($CMS.GetReplyComment($row.comment_id) != "")
                                                <p style="padding-top:10px;">
                                                    <strong>回复：</strong> $CMS.GetReplyComment($row.comment_id)
                                                </p>
                                                #end
										</p>
									</div>
								</li>
								#end
							</ul>
    #if ($reviewlist.Count == 0)
						<div class="z3g-noResultMsg">
							<div class="icon"></div>
							<p class="row01">还没有人留言</p>
							<p class="row02">点击“我要留言”，快来留言吧！</p>
						</div>
			
    #else
       <div class="SharePage">
       $pager
       </div>
    #end
</div>    
#end
#if ($type != "list")
<form id="reviewForm" onsubmit="return reviewFormsub(this)" method="post" action="/tools/ajax.aspx?act=AddReview" name="reviewForm">
			<div style="display:none" id="borderContEmit" class="borderCont z3g-noTouchMoveWrap">
				<ul>
					<li class="name">
						<input type="text" placeholder="您的姓名" maxlength="20" name="review_name" id="review_name" class="z3g-input">
					</li>
					<li class="email">
						<input type="email" placeholder="输入您的邮箱" maxlength="50" name="review_email" id="review_email" class="z3g-input">
					</li>
					<li class="cont">
						<textarea placeholder="输入您的评论内容" id="review_content" name="review_content" class="z3g-textarea"></textarea>
					</li>
					<li class="verificationCode">
						<input type="text" placeholder="输入右侧验证码" maxlength="25" value="" name="captcha" id="captcha" class="z3g-input">
						<img src="/tools/verifyimagepage.aspx" onclick="this.src='/tools/verifyimagepage.aspx?'+Math.random()" style="vertical-align:bottom;" alt="看不清？点击更换另一个验证码。" />
					</li>
					<li class="submitBtn">
					    <input type="hidden" name="comment_type" value="$!comment_type" />
                        <input type="hidden" name="id_value" value="$!id_value" /> 
						<button type="submit" class="z3g-button active">发表留言</button>
					</li>
				</ul>
			</div>
</form>


<script type="text/javascript">
    $(document).ready(function() {
        LoadReviewList(1);
        $(".alertInfoOperation button").click(function() {
            $(".z3g-alertInfoFault-c1").hide();
            $("#borderContEmit").show();
        })
    });
    //载入评论列表
    function LoadReviewList(pageIndex) {
        jQuery.ajax({
            type: "GET",
            cache:false,
            url: "/tools/ajax.aspx",
            data: "act=GetReviewList&comment_type=$!comment_type&id_value=$!id_value&pageindex=" + pageIndex,
            dataType: "html",
            success: function(data) {
                jQuery('#review-list').html(data);
            }
        });
    }
    function reviewFormsub(form) {
        jQuery(form).ajaxSubmit({
            dataType: 'json',
            beforeSubmit: function() {
                var validator = new Validator("reviewForm");
                validator.required("review_name", "请输入用户昵称！");
                validator.required("review_content", "请输入评论内容！");
                validator.required("captcha", "请输入验证码！");
                return validator.passed();
            },
            success: function(data) {
                if (data.error == 1) {
                    $("#msgFaultAlertInfo").show().find(".infoOther").html(data.message);
                    $("#borderContEmit").hide();
                    //alert(data.message);
                    //                    if (data.message == "请先登录，才能提交评论！") {
                    //                        window.location.href = "/login.aspx?act=login";
                    //                    }
                }
                else {
                    alert("您的评论已提交成功，请等待审核");
                    $('#reviewForm').resetForm();
                    LoadReviewList(1);
                    ReloadCaptcha();
                }
            }
        });
        return false;
    } 
</script>
#end